// ==UserScript==
// @name         Stack Review Suggested Edits Rework
// @description  Make reviewing nice again!
// @namespace    scratte-fiddlings
// @version      1.1
//
// @author       Scratte (https://stackoverflow.com/users/12695027)
// @contributor  Oleg Valter (https://stackoverflow.com/users/11407695)
// @contributor  double-beep (https://stackoverflow.com/users/10607772)
//
// @include      /^https://stackoverflow.com/review/suggested-edits.*/
// @exclude      /^https://stackoverflow.com/review/suggested-edits/(stats|history)/
// @include      /^https://superuser.com/review/suggested-edits.*/
// @exclude      /^https://superuser.com/review/suggested-edits/(stats|history)/
// @include      /^https://serverfault.com/review/suggested-edits.*/
// @exclude      /^https://serverfault.com/review/suggested-edits/(stats|history)/
// @include      /^https://stackapps.com/review/suggested-edits.*/
// @exclude      /^https://stackapps.com/review/suggested-edits/(stats|history)/
//
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_deleteValue
// ==/UserScript==
!function(){"use strict";const e={colour:{postType:"#d1383d",summary:"#f48024",radioSeperator:"var(--blue-200)",progressDone:"#f48024",progressNotDone:"var(--black-075)",progressTextColour:"var(--black-600)",editorHeader:"hotpink",editorApproved:"var(--green-600)",editorRejected:"var(--red-600)",editorTotal:"var(--powder-700)",message:"var(--yellow-700)",messageBackground:"var(--powder-200)",diffChoices:"orchid"},size:{editorStatistics:"96%",summary:"150%",radioSeperator:"2",message:"150%",apiQuotaLimit:"500"},options:{radioVsButtons:{moveRadioBox:"Yes",tooltips:"No",keepRadios:"No",radioWithBorders:"Yes",largerClickArea:"Yes"},moveProgressBar:"Yes",movePageTitleLink:"Yes",AnswerQuestionOnTop:"Yes",highlightSummary:"No",prominentReviewMessage:"Yes",keepDiffChoices:"Yes",moveDiffChoices:"No",moveNextButtons:"No",userCards:{useStackUserCards:"No",newContributor:"Yes",getUserCards:"Yes",withEditiorStats:"No"},postSummary:{useStackSummary:"No",useAPI:"No"},wantNewModeratorFlair:"No",reviewFilters:{removeTextFilters:"Yes",putAlertIcon:"Yes",keepFilterList:"No"},removeLineThrough:"Yes",linksOnTitles:"No"}},t="Stack Review Suggested Edits Rework",s=t.replaceAll(" ",""),n=!!window.GM_getValue&&!!window.GM_setValue&&!!window.GM_deleteValue,r=o();function o(){let t=i();return t||(a(e),t=i()),t}function i(){return n?window.GM_getValue(s):JSON.parse(localStorage.getItem(s))}function a(e){n?window.GM_setValue(s,e):localStorage.setItem(s,JSON.stringify(e))}let d={};const c=/^\/review\/(next-task|task-reviewed)/;function l(e){$(document).ajaxComplete(((s,n,{url:r})=>{if(c.test(r)){if(d.error)return void console.error(t+" - "+d.error);e()}}))}$(document).ajaxComplete(((e,t,s)=>{if(c.test(s.url))if(t.responseJSON)d=t.responseJSON;else try{d=JSON.parse(t.responseText)}catch(e){d.error=I.error}}));const p=(e,t)=>e.find((({tabMenu:e})=>e===t)),u=(e,t)=>e.find((({name:e})=>e===t)),m=(e,t,s)=>e.find((({tabMenu:e})=>e===t))?.items.find((({name:e})=>e===s)),g=(e,t)=>{let s=e;return t.split(".").forEach((e=>s&&=s[e])),s},f=(e,t,s)=>{let n=e;const r=t.split(".");r.slice(0,-1).forEach((e=>n=n[e]||={})),n[r.slice(-1)]=s};function y(e){const t=document.querySelector(e);t&&t.remove()}function v(e,t,s,n){const{classList:r,style:o,textContent:i}=e;e.textContent=(i||"").trim().replace(/^Comment/,"Summary"),o.fontSize=s,o.color=t,r.remove(n)}function h(e,t=!1){const{classes:{buttons:{button:s,muted:n,outlined:o,xsmall:i,selected:a,group:d},filterDiff:c,navigation:l,spaces:{marginBottom16:p}},selectors:{content:{reviewPost:u,diffs:m}}}=I,g=[...document.querySelectorAll(`${u} > ${m} > [id]`)].map((e=>function(e,d,c){const l=document.createElement("button");l.type="button",l.classList.add(s,n,o,i),"Inline"===e&&l.classList.add(a);l.id=d,t||l.setAttribute("aria-controls",c);return l.setAttribute("role","tab"),l.textContent=e,l.style.color=r.colour.diffChoices,l}(e.dataset.type.replace("Html","").replace("SideBySide","Side-by-side").replace("Markdown"," Markdown"),e.getAttribute("aria-labelledby"),e.id))),f=document.createElement("div");t||f.classList.add(c),f.classList.add(d),f.dataset.controller=l,f.append(...g),f.setAttribute("role","tablist");const y=document.createElement("div");return y.classList.add(p),y.id=e,y.append(f),y}function w(e,t,s,n){const{firstChild:r,firstElementChild:o}=e;if(!o||!r||r.nodeType!==Node.TEXT_NODE||""===r.nodeValue.trim())return;const i=document.createElement("p");i.textContent=r.nodeValue.trim(),i.style.color=t,i.style.backgroundColor=s,i.style.padding="5px",i.style.fontSize=n,e.insertBefore(i,o),r.nodeValue=""}function S(){return!1===d.isUnavailable}function b(e){return/skip/i.test(e)}function x(e,t=!1){const s=document.querySelector(I.selectors.filter.dialog);if(!s)return;const{previousElementSibling:n}=s;if(n){if(t){const{firstElementChild:t}=n;t&&n.insertBefore(e,t.nextSibling)}else n.appendChild(e);n.style.justifyContent="space-between"}}function C(e,t){const{classes:{userCards:{moderatorFlair:s,owner:n}},selectors:{users:{userReputation:r,badges:o,newContributorLabel:i}}}=I,a=e.classList?.contains(n),d=e.querySelector(i);let c=e.querySelector(t.userLink);if(!c)return{};const l=c.querySelector("a:not(span > a)");if(!l){const e=c.querySelector("span");e&&(c=e)}if(!e.querySelector(t.userAvatar))return{};const p=e.querySelector(t.userAvatar+" img"),u=e.querySelector(t.userAwards);if(!u)return{};const m={},g=u.querySelector(r);if(g){m.reputation={amount:g.textContent,title:g.title.trim()};if(u.querySelector(o)){m.badges={};for(const e of["gold","silver","bronze"]){const t=u.querySelector(`[title~=${e}]`);m.badges[e]=t?parseInt(t.textContent):0}}}const f=!!c.querySelector("."+s);return{accountLink:!!l&&l.href,displayName:l?l.textContent:c.textContent,profileImage:!!p&&p.src,isModerator:f,isOwner:a,newContributor:d,achievements:m}}function E(e,t=!1){const s=e.querySelector("span[title]");if(!s)return{};const n=e.textContent.trim().split(" ")[0].toLowerCase(),r={showTime:s.textContent,timeUTC:s.title,prefix:n};if(t){e.querySelector("a")?r.revisions=e:r.timeElement=s}return r}const L="Base",k="Minimal";function T({accountLink:e,displayName:t,isModerator:s},n){const o="Yes"===g(r,"options.userCards.useStackUserCards"),i="Yes"===g(r,"options.wantNewModeratorFlair"),{display:{container:a,cell:d,gap4px:c},sUserCards:{cardLink:l},userCards:{moderatorFlair:p},badges:{base:u,xsmall:m,moderator:f}}=I.classes,y=e?document.createElement("a"):document.createElement("span");switch(e&&(y.classList.add(l),y.href=e),n){case L:y.classList.add(a),o?y.classList.add(l):e||(y.style.padding="2px");const n=document.createElement("div");n.classList.add(d),n.textContent=t,y.append(n),y.style.overflowWrap="anywhere",s&&(i&&y.classList.add(c),y.append(v(!0,i)));break;default:y.style.fontSize="100%",y.style.paddingLeft="5px",y.textContent=t,s&&y.append(v(!1,i))}function v(e,t){const s=e?document.createElement("div"):document.createElement("span");if(t){s.classList.add(u,f,m);const t=document.createElement("span");t.style.marginBottom="-2px",t.textContent="Mod",s.append(t),e?s.classList.add(d):(s.style.marginBottom="3px",s.style.marginLeft="5px")}else s.style.fontSize="135%",s.textContent="♦",s.classList.add(p),s.title="moderator";return s}return y}function A({accountLink:e,profileImage:t},s){const{classes:{sUserCards:{avatar:n,cardAvatar:r,avatarSize32:o,image:i}}}=I,a=document.createElement("img");a.classList.add(i),a.src=e?t:"https://stackoverflow.design/assets/img/anonymous-user.svg";const d=e?document.createElement("a"):document.createElement("span");switch(d.classList.add(n,r),e&&(d.href=e),d.append(a),s){case L:d.classList.add(o);break;default:a.style.width="20px",a.style.height="20px",d.style.backgroundColor=R}return d}function O(e){const{sUserCards:t}=I.classes,{reputation:s}=e,n=document.createElement("li");n.classList.add(t.cardRep),n.textContent=s.amount,n.title=s.title;const r=document.createElement("ul");r.classList.add(t.cardAwards),r.style.flexWrap="wrap",r.append(n);const{badges:o}=e;return o&&(i(r,o.gold,"gold"),i(r,o.silver,"silver"),i(r,o.bronze,"bronze")),r;function i(e,s,n){if(s>0){const r=document.createElement("li");r.classList.add(t.bling,t[n]),r.textContent=s,r.title=s+" "+n+" "+(1===s?"badge":"badges"),e.append(r)}}}function B(e,t){const{showTime:s,timeUTC:n,prefix:r,timeElement:o,revisions:i}=e,a=document.createElement("time");return a.classList.add(I.classes.sUserCards.cardTime),i?(a.append(i),a):(t===k&&(a.style.fontSize="100%",a.style.paddingLeft="15px"),o?(a.textContent=r+" ",a.append(o),a):(a.textContent=r+" "+s,a.dateTime=n,a.title=n,a))}function P(){const e=g(r,"options.userCards");if("Yes"!==e?.getUserCards)return;const s="Yes"===e?.useStackUserCards,n="Yes"===e?.newContributor,{ids:{custom:{userCards:o}},selectors:{content:{reviewPost:i}},classes:{display:{container:a,start:d}}}=I;if(document.getElementById(o))return;const c=document.querySelector(`${i} > .${a}`);function l(e,t){const{card:r,info:o,highlighted:i,cardDeleted:a,cardType:c}=I.classes.sUserCards,l=L,p=T(e,l),u=A(e,l),m=document.createElement("div");m.classList.add(o),m.append(p);const g=document.createElement("div");g.classList.add(r),g.style.width="200px",e.isOwner&&g.classList.add(i),g.append(B(t,l),u,m);const{achievements:f}=e;if(f&&0!==Object.getOwnPropertyNames(f).length?m.append(O(f)):(g.classList.add(a),s||g.classList.add(d),e.pii&&m.append(e.pii)),n&&e.newContributor){const t=document.createElement("div");t.className=c,t.append(e.newContributor),t.style.marginBottom="-30px",t.querySelector("svg").style.verticalAlign="middle",g.append(t)}return g}c&&(async function(e){const{selectors:{content:{originalPost:n}},classes:{answers:o,userCards:{signature:i}}}=I,a=document.querySelector(`${n} a`);if(!a)return!1;const{href:c,hash:p,classList:u}=a,m=u.contains(o)?"#answer-"+p.substring(1):".question";e.style.justifyContent="space-between",e.classList.add(d);try{const t=await fetch(c),n=await t.text(),r=[...(new DOMParser).parseFromString(n,"text/html").querySelectorAll(`${m} .${i}`)],o=r.length?t.status:404,a={errorNotFound:["The original post is unavailable.","User cards cannot be retrieved."],responseNotOk:["Tried to fetch usercards, but",`Stack responded with status: ${o}`]},p={200:()=>function(e){const{gravatarSmall:t}=I.classes.userCards,n=y();if(n.classList.add(d),!s)return n.append(...e),n;const r=e.map((e=>0!==e.querySelector(`.${t}`)?.children.length?function(e){const{details:t,gravatarSmall:s,flair:n,actionTime:r}=I.classes.userCards,o=C(e,{userLink:"."+t,userAvatar:"."+s,userAwards:"."+n}),i=e.querySelector("."+r);if(!i)return;const a=E(i,!0);return l(o,a)}(e):e));return n.append(...r),n}(r),404:()=>f(a.errorNotFound),default:()=>f(a.responseNotOk)},u=(p[o]||p.default)();e.append(u),U(u)}catch(s){const n=["Something is blocking fetching user cards","Could be your ad-blocker or your network connection.","Check the console."];console.error(t+" - originalPostUserCards - error",s),e.append(f(n))}"Yes"!==g(r,"options.radioVsButtons.moveRadioBox")&&(e.style.width=function(){const{main:e,revision:t,reviewMargin:s}=I.selectors.content,n=document.querySelector(e),r=document.querySelector(t+" "+s);return n&&r?n.clientWidth-r.clientWidth+"px":"orange"}());function f(e){const t=y(!1);t.style.backgroundColor="var(--red-050)",t.style.border="1px solid var(--red-100)",t.style.padding="8px",t.style.margin="6px";const s=e.map((e=>{const t=document.createElement("h4");return t.textContent=e,t.style.color="var(--theme-body-font-color)",t.style.padding="2px",t}));return t.append(...s),t}function y(e=!0){const{ids:{custom:{userCards:t}},classes:{display:{container:s}}}=I,n=document.createElement("div");return n.id=t,e&&n.classList.add(s),n}}(c),function(e){if(!e)return;const n=e.querySelector("span");if(!n)return;const{classes:{sUserCards:{cardMinimal:o}},selectors:{users:{pii:i}}}=I,a=e.querySelector("."+o);if(!a){const t=e.querySelector(i),s=p(null,n,t);return void n.replaceWith(s)}const d=a.querySelector("a");if(!d)return;const[c]=d.href.split("/").slice(-2);function p(e,t,n){const r=null===e;if(s||r){const o=E(t,!s);if(r){const e={};n&&(e.pii=n);const s=t.textContent.match(/by(?: an)? (.+)/)||[];return e.displayName=s[1]||Y,l(e,o)}const{header:i,gravatar:a,flair:d}=I.classes.userCards.um;return l(C(e,{userLink:"."+i,userAvatar:"."+a,userAwards:"."+d}),o)}return function(e,t){const{classes:{display:{cell:s},userCards:n},size:{gravatarSmall:r},ids:{custom:{editorCard:o}}}=I,i=document.createElement("div");i.id=o,i.classList.add(n.signature,s);const a=document.createElement("div");a.classList.add(n.info,n.hover);const d=document.createElement("div");d.classList.add(n.actionTime),d.textContent="proposed ",d.appendChild(t.firstElementChild);const c=e.querySelector(`.${n.um.gravatar}`);if(!c)return;const{classList:l}=c;l.remove(n.um.gravatar),l.add(n.gravatarSmall);const p=c.querySelector(`.${n.gravatarWrap}`);if(!p)return;const{classList:u}=p;u.remove(n.gravatarWrap),u.add(n.gravatarSmallWrap);const m=p.querySelector("img");if(!m)return;m.style.height=m.style.width=r;const g=document.createElement("div");g.classList.add(n.details);const f=e.querySelector(`.${n.um.header}`);if(!f)return;const y=f.querySelector("a");if(!y)return;const v=f.querySelector(`.${n.moderatorFlair}`),h=e.querySelector(`.${n.um.flair}`);if(!h)return;const{classList:w}=h;return w.remove(n.um.flair),w.add(n.flair),g.append(y,v||"",h),a.append(d,c,g),i.appendChild(a),i}(e,t)}fetch(`https://${z}/review/user-info/1/${c}`).then((e=>{if(!e.ok)throw new Error("Response status was: "+e.status);return e.text()})).then((e=>{const s=p((new DOMParser).parseFromString(e,"text/html"),n);a.before(s),U(s),a.remove(),n.remove(),"Yes"===g(r,"options.userCards.withEditiorStats")&&function(e,s){const n=async e=>{const s=new URL(`${M}/${D}/users/${e}/suggested-edits`),n={site:z,filter:"!3xgWlhxc4ZsL1tY5Y",key:I.apiKey,pagesize:100};s.search=new URLSearchParams(n).toString();const r=e=>new Promise((t=>setTimeout(t,e)));async function o(e,s){try{const t=await fetch(`${e.toString()}&page=${s}`);return t.ok?t.json():{}}catch(e){console.error(t+" - error fetching editor stats from the API - makeApiCall",e)}}const i=[];let a=!0,d=1;for(;a;){const e=await o(s,d),{items:t=[],has_more:n,backoff:c=0}=e;a=n,d++,i.push(...t),q(e),await r(1e3*c)}return i},o=document.createElement("div");o.classList.add(I.classes.display.container),e.before(o),o.appendChild(e);const{colour:i}=r,a=r.size.editorStatistics;s<0?o.appendChild(_([],i,a,-1)):n(s).then((e=>o.appendChild(_(e,i,a,s))))}(s,c)})).catch((e=>{console.error(t+" - Error - while fetching editorUserCard : ",e)}))}(c))}function q(t){let s=parseInt(g(r,"size.apiQuotaLimit"));isNaN(s)&&(s=g(e,"size.apiQuotaLimit"));const{quota_remaining:n,backoff:o,error_message:i}=t;n<=s&&N(n,"quota"),o&&N(o,"throttle"),i&&N(i,"error")}function N(e,s,n){const r={quota:`<p>${Y}${t}.</p>\n                          <p${n?` id=${n}`:""}>${Y}You're low on API quota (remaining: ${e}).<br/>\n                            ${Y}Consider turning both of these off:</p><ul><li>"with editor statistics" under "Add user cards" </li>\n                                <li>"Using Stack Exchange API" under "Stack Design post summary"</li></ul>`,error:`<p>${t}</p>Stack API says: <p>${e}</p>`,throttle:`<p>${Y}${t}</p>\n                            <p>${Y}Stack API says:<br/>\n                               ${Y}Wait <b>${e}</b> seconds before making another API request!</p>\n                            <p>${Y}You can avoid this by turning both of these off:</p><ul><li>"with editor statistics" under "Add user cards" </li>\n                                <li>"Using Stack Exchange API" under "Stack Design post summary"</li></ul>`},{display:{container:o,cell:i,spaceBetween:a},buttons:{button:d,notice:c},notice:{toast:l,base:p,warning:u,padding:m}}=I.classes,g=document.createElement("button");g.classList.add(d,c),g.type="button","undefined"!=typeof Svg?g.append(Svg.ClearSm().get(0)):g.textContent="✖";const f=document.createElement("div");f.classList.add(o),f.style.marginTop="-4px",f.style.marginRight="-2px",f.append(g);const y=document.createElement("div");y.classList.add(i),y.innerHTML=r[s];const v=document.createElement("div");v.classList.add(o,a),v.style.alignItems="flex-start",v.append(y,f);const h=document.createElement("aside");if(h.classList.add(p,u,m),h.append(v),n)return h;const w=document.createElement("div");w.classList.add(l),w.setAttribute("aria-hidden","false"),w.append(h),g.addEventListener("click",(e=>{w.setAttribute("aria-hidden","true")})),document.body.append(w)}function U(e=document){e.querySelectorAll("img").forEach((e=>{e.addEventListener("error",(t=>{e.src="https://i.stack.imgur.com/Y2OIR.png"}),{once:!0})}))}const R="var(--white)",M="https://api.stackexchange.com",z=window.location.hostname,D=2.2,Y=" ",I={apiKey:"YeacD0LmoUvMwthbBXF7Lw((",ids:{custom:{userCards:s+"-UserCards",editorCard:s+"-EditorCard",buttons:s+"-RealButtons",postType:s+"-PostType",actionRadios:s+"-ActionRadios",diffChoices:s+"-DiffChoices",keepDiffChoices:s+"-KeepDiffChoices",progressBar:s+"-Progressbar",postSummary:s+"-postSummary",tagFilters:s+"-tagFilters",tagFilterIcon:s+"-tagFilterIcon"}},error:"Oh No! Oh no-no-no-no-no! Arrrrrrrgh!...",tags:{radios:"fieldset"},classes:{display:{container:"d-flex",desktopHide:"d-none",displayBlock:"d-block",cell:"flex--item",center:"ai-center",start:"ai-start",spaceBetween:"jc-space-between",gap4px:"gs4"},spaces:{marginBottom16:"mb16",marginTop16:"mt16",negativeMargin:"mxn12",titleSpace:"ml12"},choiceRadios:{fieldset:["fd-column","p12"],submits:["bt","bc-black-3"],button:"pt12",widget:"s-sidebarwidget",radioParent:"js-action-radio-parent"},sUserCards:{card:"s-user-card",info:"s-user-card--info",highlighted:"s-user-card__highlighted",cardMinimal:"s-user-card__minimal",carlSmall:"s-user-card__small",cardTime:"s-user-card--time",cardAwards:"s-user-card--awards",cardRep:"s-user-card--rep",cardLink:"s-user-card--link",cardType:"s-user-card--type",cardDeleted:"s-user-card__deleted",avatar:"s-avatar",avatarSize32:"s-avatar__32",image:"s-avatar--image",cardAvatar:"s-user-card--avatar",bling:"s-award-bling",gold:"s-award-bling__gold",silver:"s-award-bling__silver",bronze:"s-award-bling__bronze"},userCards:{signature:"post-signature",info:"user-info",details:"user-details",actionTime:"user-action-time",gravatarSmall:"user-gravatar32",gravatarSmallWrap:"gravatar-wrapper-32",gravatarWrap:"gravatar-wrapper-64",flair:"-flair",moderatorFlair:"mod-flair",hover:"user-hover",owner:"owner",um:{gravatar:"um-gravatar",header:"um-header-info",flair:"um-flair"}},badges:{base:"s-badge",small:"s-badge__sm",xsmall:"s-badge__xs",moderator:"s-badge__moderator",green:"s-badge__rep",red:"s-badge__rep-down",grey:"s-badge__votes"},buttons:{button:"s-btn",primary:"s-btn__primary",outlined:"s-btn__outlined",danger:"s-btn__danger",muted:"s-btn__muted",loading:"is-loading",small:"s-btn__sm",xsmall:"s-btn__xs",selected:"is-selected",group:"s-btn-group",notice:"s-notice--btn"},tags:{meta:"s-post-summary--meta",metaTag:"s-post-summary--meta-tags",tag:"s-tag",legacyTag:"post-tag"},notice:{toast:"s-toast",base:"s-notice",warning:"s-notice__warning",padding:"p8"},postSummary:{base:"s-post-summary",stats:"s-post-summary--stats",item:"s-post-summary--stats-item",content:"s-post-summary--content",contentTitle:"s-post-summary--content-title",hasAnswers:"has-answers",hasAccepted:"has-accepted-answer",supernova:"is-supernova",hot:"is-hot",warm:"is-warm",link:"s-link",summaryAnswers:"s-post-summary--has-answer",summaryAccepted:"s-post-summary--has-accepted-answer"},postSummaryLegacy:{contentBox:"narrow",cursorPointer:"cp",square:"mini-counts",scoreClass:"votes",viewsClass:"views",answerClass:"status",answered:"answered",accepted:"answered-accepted"},summary:"fc-red-800",answers:"answer-hyperlink",filterDiff:"js-diff-choices",navigation:"s-navigation-tablist"},size:{gravatarSmall:"32",radio:"0.905em"},selectors:{postTitleFontSize:".fs-title",actions:{reviewTask:".s-page-title--actions a",radioActionsBox:".js-actions-sidebar",reviews:".js-review-actions"},buttons:{action:".js-action-button",submit:".js-review-submit"},reviews:{done:".js-reviews-done",daily:".js-reviews-per-day",banner:"[role=status]"},filter:{button:".js-review-filter-button",choices:".js-review-filter-summary",dialog:"#js-review-filter-id"},title:{divwrapper:".s-page-title",actionsTabs:".s-page-title--actions",description:".s-page-title--description",learnMore:".js-show-modal-from-nav.s-link",title:".s-page-title--text",header:".s-page-title--header"},content:{content:".js-review-content",originalPost:".js-question-title-link",main:".mainbar-full",reviewPost:".postcell",reviewMargin:".votecell",revision:"#panel-revision",tabs:".js-review-tabs",task:".js-review-task",diffs:".diffs"},users:{userReputation:".reputation-score",badges:".v-visible-sr",newContributorLabel:".js-new-contributor-label",pii:".pii"},diffs:{diffDelete:"span.diff-delete",diffAdd:"span.diff-add"},acceptedAnswer:".js-accepted-answer-indicator",fullReview:"content"}};function F(e,t,s,n,r=!0){const o=e=>e.replace(/\D/g,""),i=(e,t=1)=>0!==t&&e?i(e.parentElement,t-1):e;(e=>{if(!s||!n)return!1;const a=o(s.textContent||"0"),d=o(n.textContent||"0"),c=(e=>`${Math.trunc(100*e)}%`)(+d/+a);if(!e)return!1;const{style:l}=e,{progressDone:p,progressNotDone:u,progressTextColour:m}=t;l.background=`linear-gradient(90deg, ${p} ${c}, ${u} ${c})`,l.setProperty("color",m,"important"),e.textContent=`Review tasks (${d}/${a})`,(e=>{const t=i(e,3);!!t&&(t.id=I.ids.custom.progressBar,r?t.style.display="none":t.style.visibility="hidden")})(s)})(e)}function _(e,t,s,n=0){const r=e=>{const t={get ratio(){const{approved:e,rejected:t,total:s}=this;return{ofApproved:e/s,ofRejected:t/s,approvedToRejected:(0===e?NaN:e)/(0===t?NaN:t)}},approved:0,rejected:0,total:0};return e.forEach((({approval_date:e,rejection_date:s})=>{t.total+=1,e&&(t.approved+=1),s&&(t.rejected+=1)})),t},o=(e,t=!1)=>t?isFinite(e)?`(${Math.trunc(100*e)}%)`:Y.repeat(4):isFinite(e)?e.toFixed(2):"N/A",i=(e,t=!1)=>{const s=document.createElement("tr");var n;return s.style.color=e.colour,t?s.append((e=>{const t=document.createElement("b");t.innerText=e.items[0];const s=document.createElement("th");if(s.colSpan=4,e.userId>0){const n=document.createElement("a");n.style.color=e.colour;const r=window.location.origin;r&&(n.href=`${r}/users/${e.userId}?tab=activity&sort=suggestions`),n.append(t),s.append(n)}else s.append(t);return s})(e)):s.append(...(n=e.items,n.map((e=>{const t=document.createElement("td");return t.innerText=e,t})))),s},a=({relativeFontSize:e,header:t,rows:s})=>{const n=document.createElement("table");if(n.style.marginTop="5px",n.style.fontSize=e,t){const e=i(t,!0);n.append(e)}const r=s.map((e=>i(e)));return n.append(...r),n},d=(...e)=>{const t=document.createElement("div");return t.classList.add(I.classes.display.cell),t.append(...e),t};return((e,t,s,n)=>{const{approved:i,rejected:c,total:l,ratio:{approvedToRejected:p,ofApproved:u,ofRejected:m}}=r(e),g={colour:t.editorHeader},f={relativeFontSize:s,header:{...g,items:["Editor Statistics (non-deleted posts)"],userId:n},rows:[]};if(n<0)return f.rows.push({...g,items:[Y]}),f.rows.push({...g,items:["This user does not suggest edits :)"]}),d(a(f));if(!l){const e=document.getElementById(I.ids.custom.postType);if(e&&["Question","Answer"].indexOf(e.textContent)<0)return f.rows.push({...g,items:[Y]}),f.rows.push({...g,items:["Tag wiki/excerpt edits are not returned."]}),f.rows.push({...g,items:["Please see the user's activity tab"]}),d(a(f))}return f.rows.push({colour:t.editorApproved,items:[`Approved:${Y}`,i,`${Y} ${o(u,!0)}`,`${Y} Ratio: ${o(p)}`]}),f.rows.push({colour:t.editorRejected,items:["Rejected:",c,`${Y} ${o(m,!0)}`]}),f.rows.push({colour:t.editorTotal,items:["Of total:",l,Y,`${Y} ${l-(i+c)} Pending`]}),d(a(f))})(e,t,s,n)}!function(){if("Yes"!==g(r,"options.movePageTitleLink"))return;(e=>{const{selectors:{title:{title:t,header:s,learnMore:n}},classes:{spaces:{titleSpace:r},display:{container:o}}}=e,i=document.querySelector(t);if(!i)return!1;i.classList.add(o);const a=document.querySelector(s),d=(e=>{const t=document.createElement("div");return t.classList.add(e.classes.display.cell),t})(e);d.classList.add(r),a&&d.append(a);const c=i.querySelector(n),l=d.cloneNode();c&&l.append(c),((e,t)=>{(t||document).querySelectorAll(e.selectors.title.description).forEach((e=>e.remove()))})(e,i),i.append(d,l)})(I)}(),function(){if("Yes"!==g(r,"options.removeLineThrough"))return;const e=document.createElement("style");document.head.appendChild(e);const t=e.sheet;t&&t.insertRule(`\n              ${I.selectors.diffs.diffDelete} {\n                   text-decoration: initial;\n              }`)}(),l((()=>{const e=g(r,"options.radioVsButtons"),s=e?.moveRadioBox,n=e?.keepRadios;"Yes"===s&&("Yes"!==n?async function(){const e="Yes"===g(r,"options.radioVsButtons.tooltips"),s="skip",n="disable",o="enable",i="hide",a="unhide",c="no-op";if(!S())return void q(i);const{ids:{custom:{buttons:l}},classes:{choiceRadios:{widget:p,radioParent:u},display:{container:m,cell:f,gap4px:v},buttons:h},selectors:{actions:w,buttons:C}}=I;if(document.querySelector(`#${l}`))y(`#${l}`);else{document.body.addEventListener("click",(e=>{if("button"===e.target.type||"BUTTON"===e.target.nodeName){const t=e.target.innerText.trim(),[s]=[["Skip",b],["Other answers",e=>/^(Other a|A)nswer/.test(e)]].find((([e,s])=>s(t)))||[t];q(B.get(s))}}));const e=document.querySelector(w.radioActionsBox);e&&(e.style.display="none")}const E=document.querySelector(`.${p}${w.reviews}`);if(!E)return;const L=E.querySelector(C.submit);if(!L)return;const k=function(){const e=document.createElement("div");return e.id=l,e.classList.add(m,v),e}(),T=[...E.querySelectorAll("."+u)].map((e=>{const s=e.querySelector("input[type=radio]"),n=e.querySelector("label"),r=e.querySelector("p");if(s&&r&&n&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE)return P({value:n.firstChild.nodeValue.trim(),tip:r.textContent},[s,L]);console.error(t+" - "+I.error+" - shadowRadiosToButtons")}));if(!T.length)return;k.append(...T);const A=E.querySelector(C.action);if(!A)return;const O=A.textContent?.trim();if(!b(O))return;k.append(P({value:O},[A])),x(k),q(s);let{actionDelay:$}=d;$&&!isNaN($)||($=0),await new Promise((e=>setTimeout(e,$))),q(o);const B=new Map([["Reject",c],["",c],["Submit",c],["Skip",s],["Approve",n],["Improve edit",n],["Reject and edit",n],["Cancel",o],["Reject edit",n],["Save edits",n],["Side-by-side Markdown",c],["Side-by-side",c],["Inline",c],["Revision",c],["Question",c],["Other answers",c],["Filter",c],["Apply filter",n],["Clear",n],["Hide results",c],["Next task",c],["Reviewer stats",c],["Restore tab settings",c],["Apply & Exit",c],["✖",c]]);function P(t,s){const n=document.createElement("button");return n.type="button",n.classList.add(h.button,f),n.textContent=t.value,e&&t.tip&&(n.title=t.tip),b(t.value)?(n.style.minWidth="70px",n.classList.add(h.outlined)):n.classList.add(h.primary),n.addEventListener("click",(()=>{s.forEach((e=>e.click()))})),n}function q(e){if(!e)return void console.error(t+" - shadowRadiosToButtons - No such state");if(e===c)return;const{ids:{custom:{buttons:r}},classes:{buttons:{loading:d},display:{desktopHide:l}}}=I,p=document.querySelector("#"+r);if(p)switch(e){case s:[...p.children].forEach((e=>{b(e.textContent)?e.classList.add(d):e.disabled=!0}));break;case n:[...p.children].forEach((e=>e.disabled=!0));break;case o:[...p.children].forEach((e=>{e.disabled=!1,b(e.textContent)&&e.classList.remove(d)}));break;case i:p.classList.add(l);break;case a:p.classList.remove(l)}}}():function(){const{ids:{custom:{actionRadios:e}},classes:{choiceRadios:t,display:{cell:s,container:n,displayBlock:o,center:i},spaces:{negativeMargin:a}},selectors:{actions:{reviews:d,radioActionsBox:c}},tags:{radios:l},size:{radio:p}}=I,{colour:{radioSeperator:u},size:{radioSeperator:m}}=r,f=g(r,"options.radioVsButtons"),y=f?.radioWithBorders,v=f?.largerClickArea,h=f?.tooltips,w=document.getElementById(e);if(w)w.remove();else{const e=document.querySelector(c);e&&(e.style.display="none")}if(!S())return;const C=document.querySelector(`.${t.widget}${d}`);if(!C)return;const{firstElementChild:E,classList:L,lastElementChild:k}=C;if(!k)return;E&&E.remove(),L.remove(t.widget),C.id=e;const{lastElementChild:T,classList:A,style:O}=k;if(A.remove(...t.fieldset),O.textAlign="center",!T)return;const{firstElementChild:$,classList:B}=T;if(B.remove(...t.submits),!$)return;const{firstElementChild:P,classList:q,style:N}=$;if(q.remove(t.button),N.marginLeft="5px",!P)return;[...P.children].filter((e=>b(e.innerText.trim()))).forEach((e=>e.style.minWidth="70px"));const U=k.querySelectorAll(`${d} > ${l} > div[class="${s}"]`);U.length&&(U.forEach((e=>{const{firstElementChild:t,classList:r,style:a}=e,d=e.querySelector("p");if(!d||!t)return;const{firstElementChild:c,lastElementChild:l}=t;if(!c||!l)return;const g=l.firstElementChild;if(!g)return;if("Yes"===v){const e=c.firstElementChild;if(!e)return;e.style.margin="2.5px 0px 0px 0px",e.style.width=p,e.style.height=p,g.append(e),g.classList.add(n,i),g.classList.remove(o),g.style.flexDirection="column",t.append(g),c.remove(),l.remove()}else{const t=e.querySelectorAll("."+s);if(t&&2===t.length){const{parentElement:e}=t[0];e&&e.append(t[0])}}"Yes"===h&&(t.title=d.textContent),d.remove(),t.classList.remove(n),r.remove(s),a.padding="4px";const f=g.textContent||"";"Yes"===y&&"Approve"!==f.trim()&&(a.paddingLeft="3px",a.borderLeft=`${u} solid ${m}px`)})),B.remove(a),T.style.marginRight="-12px",x(C))}()),function(){if("Yes"!==g(r,"options.moveProgressBar"))return;const e=Array.from(document.querySelectorAll(I.selectors.actions.reviewTask)).find((({href:e})=>/\/review\/suggested-edits/.test(e))),t=r.colour,{daily:s,done:n}=I.selectors.reviews;F(e,t,document.querySelector(s),document.querySelector(n))}(),function(){if("Yes"!==g(r,"options.AnswerQuestionOnTop"))return;(e=>{const{ids:{custom:{postType:t}},selectors:{title:{divwrapper:s,header:n,actionsTabs:o},content:{content:i},postTitleFontSize:a},classes:{spaces:{marginTop16:d}}}=e,c=document.getElementById(t);c&&c.remove();const l=document.querySelector(s);if(!l)return!1;const p=document.querySelector(`${i} ${a}`),u=l.querySelector(n);if(!p||!u)return!1;const m=u.cloneNode();m.id=t,m.style.paddingRight="80px",m.style.color=r.colour.postType;const g=p.textContent?.match(/^Review the following (.*) edit$/)||"";g&&(m.textContent=g[1].split(" ").map((e=>e[0].toUpperCase()+e.substring(1))).join(" "));const f=l.querySelector(o);if(!f)return!1;l.insertBefore(m,f),p.nextElementSibling.classList.remove(d),p.remove()})(I)}(),function(){if("Yes"!==g(r,"options.highlightSummary"))return;const{size:{summary:e},colour:{summary:t}}=r,{classes:{summary:s}}=I,n=document.querySelector(`.${s}`);n&&v(n,t,e,s)}(),function(){if("Yes"!==g(r,"options.prominentReviewMessage"))return;const{colour:{message:e,messageBackground:t},size:{message:s}}=r,n=document.querySelector(I.selectors.reviews.banner);if(!n)return;const o=n.firstElementChild;o&&w(o,e,t,s)}(),function(){if("Yes"!==g(r,"options.keepDiffChoices"))return;const{ids:{custom:{keepDiffChoices:e}},classes:{filterDiff:t},selectors:{fullReview:s,content:{revision:n}}}=I,o=document.getElementById(s);if(!o)return;if(o.querySelector(`.${t}:not([id])`))return;const i=document.querySelector(n);i&&i.insertBefore(h(e),i.firstChild)}(),function(){if("Yes"!==g(r,"options.moveDiffChoices"))return;const{ids:{custom:{diffChoices:e}},classes:{filterDiff:t,buttons:{small:s,xsmall:n}},selectors:{fullReview:o}}=I;y(`#${e}`);const i=document.getElementById(o);if(!i)return;const a=i.querySelector("."+t);a&&(x(a,!0),a.id=e,[...a.children].forEach((e=>{e.classList.remove(n),e.classList.add(s)})))}(),P(),function(){const{selectors:{content:{revision:e,tabs:t}}}=I,s=document.querySelector(e);if(!s)return;document.querySelector(t)||(s.style.borderTop="var(--black-100) solid 1px",s.style.paddingTop="10px")}(),function(){const e=g(r,"options.reviewFilters"),t="Yes"===e?.removeTextFilters,s="Yes"===e?.putAlertIcon,n="Yes"===e?.keepFilterList,{ids:{custom:{tagFilters:o,tagFilterIcon:i}},selectors:{filter:{button:a,choices:d}},classes:{display:{container:c,desktopHide:l},tags:{legacyTag:p}}}=I,u=document.querySelector(a);if(!u)return;const m=document.querySelector(d);if(!m)return;const f=m.textContent?.trim()||"";if(!t)return void function(e,t){if(v([t]))return;const s=document.createElement("div");s.classList.add(c),e.replaceWith(s);const n=document.createElement("div");n.id=o,n.append(t),s.style.alignItems="center",s.append(u,n)}(u,m);m.classList.contains(l)||m.classList.add(l);const y=u.querySelector(`#${i}`);if(f){if(s&&!y){let e;"undefined"!=typeof Svg?e=Svg.AlertCircle().get(0):(e=document.createElement("span"),e.textContent="🛈",e.style.fontSize="175%",e.style.verticalAlign="sub",u.style.paddingTop="5px",u.style.paddingBottom="5px"),e.id=i,u.append(e)}}else y&&y.remove();function v(e){const t=document.getElementById(o);return!!t&&([...t.children].forEach((e=>e.remove())),t.append(...e),!0)}n&&function(e,t){const s=t.split(" ").filter((e=>""!==e)).map((e=>{const t=e.replaceAll("[","").replaceAll("]",""),s=document.createElement("a");s.classList.add(p),s.href=`https://${z}/questions/tagged/${t}`,s.textContent=t,s.style.padding="1px 2px 1px 2px";const n=document.createElement("span");return n.append(s),n}));if(v(s))return;const n=document.createElement("div");n.classList.add(c),e.replaceWith(n);const r=document.createElement("div");r.classList.add(c),r.id=o,r.style.flexDirection="column",r.style.justifyContent="center",r.style.margin="-12px",r.style.marginLeft="5px",r.append(...s),n.append(e,r)}(u,f)}(),function(){if("Yes"!==g(r,"options.moveNextButtons"))return;const{classes:{display:{container:e,desktopHide:t}},selectors:{reviews:{banner:s}}}=I,n=document.querySelector(s);if(!n||n.classList.contains(t))return;let o=n.querySelector("div > div");if(!o){const t=n.querySelector("button");if(!t)return;o=document.createElement("div"),o.classList.add(e),t.parentElement?.append(o),o.append(t)}o.style.flexDirection="row-reverse"}(),function(){if("Yes"!==g(r,"options.linksOnTitles"))return;const{selectors:{postTitleFontSize:e,content:{originalPost:t}}}=I,s=document.querySelectorAll(`h1${e}`);if(s.length>0){const e=document.querySelector(t+" a");if(!e)return;const n=e.href;n&&[...s].forEach((e=>{const t=document.createElement("a");t.href=n,e.replaceWith(t),t.append(e)}))}}(),async function(){const e="Yes"===g(r,"options.postSummary.useStackSummary"),{classes:{postSummary:{base:t,item:s,stats:n,hasAnswers:o,hasAccepted:i,content:a,contentTitle:d,link:c,warm:l,hot:p,supernova:u,summaryAnswers:m,summaryAccepted:f},tags:{meta:y,metaTag:v,tag:h,legacyTag:w},badges:{base:S,small:b,green:x,red:L,grey:$},sUserCards:{card:P,carlSmall:N,cardDeleted:R,cardAwards:F,avatar:_,cardTime:j},userCards:{moderatorFlair:K},display:{container:W},postSummaryLegacy:{contentBox:H,cursorPointer:V,square:Q,scoreClass:J,viewsClass:G,answerClass:X,answered:Z,accepted:ee}},selectors:{diffs:{diffAdd:te},content:{task:se},users:ne,acceptedAnswer:re},ids:{custom:{postSummary:oe}}}=I,ie=[[u,1e5,()=>Svg.FireSm.With("va-text-bottom mrn2").get(0)],[p,1e4],[l,1e3]],ae=e=>ie.sort((([e,t],[s,n])=>n-t)).find((([t,s])=>e>=s))||[],de=[[$,e=>0===e],[x,e=>e>0],[L,e=>e<0]],ce=document.querySelector(`.${t}`);if(!ce)return;const le=ce.querySelector(`.${d} a`);if(!le)return;let pe="Yes"===g(r,"options.postSummary.useAPI");const ue=le.href.toString().split("/")[4],me=pe?await async function(e){const t=z,s=I.apiKey,n=`${M}/${D}/questions/${e}?filter=UdJdPp-(maNxziAUeISHs&site=${t}&key=${s}`,r=await fetch(n);if(!r.ok)return{};const o=await r.json();return q(o),o.items[0]}(ue):{};me&&0!==Object.getOwnPropertyNames(me).length||(pe=!1);const ge={};if(pe){const{owner:{badge_counts:e,reputation:t,link:s,profile_image:n,display_name:r,user_type:o},tags:i,creation_date:a,title:d,closed_date:c,closed_reason:l,view_count:p,score:u,accepted_answer_id:m,answer_count:g}=me;ge.answer={isAnswered:0!==g,hasAcceptedAnswer:!!m,text:g+(1!==g?" answers":" answer")},ge.postScore=u,ge.viewCount=p,ge.title={link:le.href,text:d+(c?"Duplicate"===l?" [duplicate]":" [closed]":"")},ge.tags=[...i].map((e=>{const t=document.createElement("a");return t.href=`https:/${z}/questions/tagged/${e}`,t.classList.add(h),t.textContent=e,t.title=`show questions tagged '${e}'`,t})),ge.postedTime={showTime:function e(t,s=!1){if(!t)return;const n=(new Date).getTime()/1e3-t+StackExchange.options.serverTimeOffsetSec;var r;return isNaN(n)||n<0?void 0:(!s&&n<2?"just now":!s&&n<60&&(1===(r={seconds:Math.floor(n)}).seconds?r.seconds+" sec ago":r.seconds+" secs ago"))||!s&&n<120&&"1 min ago"||!s&&n<3600&&function(e){return 1===e.minutes?e.minutes+" min ago":e.minutes+" mins ago"}({minutes:Math.floor(n/60)})||!s&&n<7200&&"1 hour ago"||!s&&n<43200&&function(e){return 1===e.hours?e.hours+" hour ago":e.hours+" hours ago"}({hours:Math.floor(n/3600)})||!s&&n<86400&&"today"||!s&&n<172800&&"yesterday"||!s&&n<604800&&function(e){return e.days+" days ago"}({days:Math.floor(n/86400)})||!s&&n<2592e3&&function(e){return 1===e.weeks?e.weeks+" week ago":e.weeks+" weeks ago"}({weeks:Math.floor(n/604800)})||n<31536e3&&function(e){return 0===e.months?"":1===e.months?e.months+" month ago":e.months+" months ago"}({months:Math.floor(n/2635200)})||!s&&function(s){const r=e(t+31536e3*Math.floor(n/31536e3),!0);return(1===s.years?s.years+" year":s.years+" years")+(r?", "+r:" ago")}({years:Math.floor(n/31536e3)})}(a),timeUTC:function(e){var t=new Date;return t.setTime(1e3*e),[t.getUTCFullYear(),"-",s(t.getUTCMonth()+1),"-",s(t.getUTCDate())," ",s(t.getUTCHours()),":",s(t.getUTCMinutes()),":",s(t.getUTCSeconds()),"Z"].join("");function s(e){return e<10?"0"+e:e}}(a),prefix:"asked"};const f={};t&&(f.reputation={amount:Se(t,"reputation"),title:"reputation score"},e&&(f.badges=e)),ge.user={accountLink:s,displayName:r,profileImage:n,isModerator:"moderator"===o,achievements:f}}else{const e=ce.querySelectorAll("."+s);if(e.length<3)return;const t=e[0],n=e[1],r=e[2],o=document.querySelector(`${re}:not(.d-none)`);ge.answer={isAnswered:!t.textContent.trim().startsWith("0"),hasAcceptedAnswer:!!o,text:t.textContent.trim()},ge.postScore=n.textContent.trim().replace(" votes","").replace(" vote",""),ge.viewCount=r.textContent.trim().replace(" views","").replace(" view",""),ge.title={link:le.href,text:le.textContent};const i=document.querySelectorAll(`${se} .${w}`);ge.tags=[...i].filter((e=>!e.querySelector(te))).map((e=>{const t=e.cloneNode();return t.className=h,t.textContent=e.textContent,t}));const a=ce.querySelector("."+y);if(!a)return;ge.user=C(a,{userLink:"."+P,userAvatar:"."+_,userAwards:"."+F,userReputation:ne.userReputation,userBadges:ne.badges,moderatorFlair:"."+K});const d=a.querySelector("."+j);if(!d)return;ge.postedTime=E(d)}const fe=function({link:e,text:t}){const s=document.createElement("a");return s.classList.add(d,c),s.href=e,s.innerText=t,s}(ge.title),ye=function(e){const t=document.createElement("div");t.classList.add(v),t.append(...e);const s=document.createElement("div");return s.classList.add(y),s.append(t),s}(ge.tags),ve=function(e,t){const s=k,n=T(e,s),r=A(e,s),o=document.createElement("div");o.classList.add(P,N),o.style.alignItems="baseline",o.style.paddingLeft="0px",o.style.paddingTop="6px",o.append(r,n);const{achievements:i}=e;return i&&0!==Object.getOwnPropertyNames(i).length?o.append(O(i)):o.classList.add(R),o.append(B(t,s)),o}(ge.user,ge.postedTime);if(e)we(ce,function(e,t,s){const r=document.createElement("div");return r.classList.add(n),r.style.flexDirection="column",r.style.flexWrap="wrap",r.style.alignItems="flex-end",r.style.marginTop="8px",r.style.paddingRight="10px",r.append(e,t,s),r}(function({isAnswered:e,hasAcceptedAnswer:t,text:n}){const r=document.createElement("div");return r.classList.add(s),e&&r.classList.add(o),t&&(r.classList.add(o,i),"undefined"!=typeof Svg?r.append(Svg.CheckmarkSm.With("va-text-bottom").get(0)):r.textContent="✓"),r.append(Y+n),r}(ge.answer),function(e){const t=document.createElement("div");t.classList.add(S,b);const[n]=de.find((([t,s])=>s(parseInt(e))))||[];n&&t.classList.add(n),t.textContent=e,t.style.paddingTop="2px",t.style.marginTop="-1px";const r=document.createElement("div");return r.classList.add(s),r.textContent="score ",r.append(t),r}(ge.postScore),function(e){const t=document.createElement("div");t.classList.add(s);const n=ae(e);return n.length>0&&(t.classList.add(n[0]),n[2]&&("undefined"!=typeof Svg?t.append(n[2]()):t.append("🔥"))),t.append(Y+Se(e,"views")+" views"),e>1e3&&(t.title=e),t.style.marginTop="-4px",t}(ge.viewCount)),he(fe,ye,ve));else{const e=function(e){const t=(e,t)=>{const s=document.createElement("div"),n=document.createElement("span"),r=document.createElement("div"),o=document.createElement("div");switch(o.className=Q,e){case"score":n.textContent=t.postScore,n.title="score: "+t.postScore,r.textContent="score",s.className=J,s.style.padding="7px 6px";break;case"answer":{const e=t.answer.text.replace(" answers","").replace(" answer",""),o=1===e?"answer":"answers";n.textContent=e,n.title=t.answer.text,r.textContent=o,s.className=X,t.answer.hasAcceptedAnswer?s.classList.add(ee):t.answer.isAnswered&&s.classList.add(Z);break}case"view":{const e=1===t.viewCount?"view":"views";n.textContent=Se(t.viewCount),n.title=t.viewCount+" "+e,r.textContent=e;const i=ae(t.viewCount);if(i.length>0){const e=i[0].replace("is-","");o.classList.add(e),r.classList.add(e)}s.className=G;break}}return o.append(n),s.append(o,r),s},s=document.createElement("a");return s.href=e.title.link,s.classList.add(V),s.append(t("score",e),t("answer",e),t("view",e)),s}(ge);ye.style.marginRight="20px";const t=document.createElement("div");t.append(ye,ve),ve.style.paddingTop="revert";const s=ve.querySelector("img");s&&(s.style.width="24px",s.style.height="24px",s.style.marginTop="-1px"),t.className=W,t.style.alignItems="baseline",we(ce,e,he(fe,t)),e.parentNode.classList.add(H)}function he(...e){const t=document.createElement("div");return t.classList.add(a),t.append(...e),t}function we(e,s,n){const r=document.createElement("div");r.classList.add(t),r.style.marginBottom="15px",r.style.borderBottom="revert",r.append(s,n),r.id=oe,r.style.padding="6px",e.before(r),e.remove();const o=r.parentElement;o&&(o.style.marginTop="-5px"),U(n)}function Se(e,t="views"){const s={views:[[1e6,1e5],[1e3,1e3]],reputation:[[1e6,1e5],[1e5,1e3],[1e4,100]]};if("reputation"===t&&e<1e4)return e.toLocaleString("en-US");if(e>1e3){const n=s[t].find((([t,s])=>e>t))[1];e=Math.round(e/n)*n}const n=[{divider:1e9,suffix:"g",views:0,reputation:1},{divider:1e6,suffix:"m",views:1,reputation:1},{divider:1e3,suffix:"k",views:0,reputation:1}].find((({divider:t})=>e>=t));return n?+(e/n.divider).toFixed(n[t])+n.suffix:e.toString()}}(),U()})),function(){const n="https://i.stack.imgur.com/",r="#fff"===U(R),i=s+"-modal-",d={headerNtooltip:t+" - Settings",ids:{icon:i+"icon",header:i+"title",body:i+"body",aside:i+"base",radioName:i+"radioName",radioButtons:i+"RadioStyleChange",radioButtonLabel:i+"radioLabel",lineThrough:i+"previewLineThough",keepDiffChoices:i+"keepDiffChoices",quotaNotice:i+"quotaNotice"},classes:{icon:{iconItem:"-item",iconLink:"-link"},smodals:{modal:"s-modal",header:"s-modal--header",close:"s-modal--close",dialog:"s-modal--dialog",body:"s-modal--body",footer:"s-modal--footer"},margins:{negative:"gs8",zeroX:"gsx",top:"mt8"},naviagations:{base:"s-navigation",item:"s-navigation--item",selected:"is-selected"},toggle:{sweetch:"s-toggle-switch",indicator:"s-toggle-switch--indicator"},padding:{Y:"py16",top:"pt16"},notice:{base:"s-notice",info:"s-notice__info"},title:{base:"s-page-title",header:"s-page-title--header"},reviewText:{post:"js-post-body",prose:"s-prose",diff:"diff-delete"},radios:{base:"s-radio",radioAction:"js-action-radio"},scroll:"overflow-y-scroll",select:"s-select",input:"s-input",label:"s-label",header:"js-user-header",pointerEventsNone:"pe-none"},attributes:{draggableTarget:"data-se-draggable-target",modalTarget:"data-s-modal-target"},colours:{toggleMutedOn:"var(--green-050)",toggleMutedoff:"var(--black-150)",muted:"var(--mp-muted-color)",active:"var(--fc-dark)",seperator:"var(--black-200)",border:"var(--black-075)"},sizes:{editorAvatar:{width:"200px",height:"66px"},labels:{fontSizeSmaller:"1.10rem",fontWeightSmaller:"525"}},hide:"s-modal#hide",show:"s-modal#show",draggable:"se-draggable",topMenuSelector:"ol.user-logged-in"},c=[{tabMenu:"Radios or Buttons",id:i+"RadiosOrButtons",tabDefault:!0,previewUpdates:{radiosButtons:e=>function(e,t,s,o,i){const a=z(e,t),d=z(e,s),c=z(e,o),l=z(e,i),p=a.lastElementChild,{firstElementChild:u,lastElementChild:m}=p,f=d.lastElementChild,y=c.lastElementChild,v=l.lastElementChild,h=g(S,"options.radioVsButtons"),w="Yes"===h?.moveRadioBox,b="Yes"===h?.keepRadios,x="Yes"===h?.radioWithBorders,C="Yes"===h?.largerClickArea,E="Yes"===h?.tooltips,{classes:{display:{desktopHide:L}}}=I;if(w&&b){u.classList.remove(L),m.classList.add(L),V(e,t),H(f,x,{lightOn:"rtDv9.png",lightOff:"VdbX8.png",darkOn:"D3Qv1.png",darkOff:"to4Rl.png"});const s=[["oXow0.png",x,C],["GR5nm.png",x],["DzA5H.png",C],["5mSiL.png"]],o=[["xzpHa.png",x,C],["hZ8b7.png",x],["c5Yvs.png",C],["ck2v7.png"]],i=[["rFi20.png",x,E],["QH2tk.png",x],["TkAu6.png",E],["gG7kO.png"]],a=[["WW4Fg.png",x,E],["bP06H.png",x],["R8laG.png",E],["lARUW.png"]],d=r?s:o,c=r?i:a,[l]=d.find((([e,...t])=>t.every(Boolean))),[p]=c.find((([e,...t])=>t.every(Boolean)));y.src=`${n}${l}`,v.src=`${n}${p}`}else u.classList.add(L),m.classList.remove(L),w?(m.src=r?`${n}YxDs0.png`:`${n}FcrHn.png`,f.src=r?`${n}XPIdk.png`:`${n}Bf5Lm.png`,v.src=E?r?`${n}8RB1j.png`:`${n}8zGZF.png`:r?`${n}pNECy.png`:`${n}okMEA.png`):(m.src=`${n}WgO6m.png`,v.src=`${n}0ucaP.png`,f.src=r?`${n}Sr586.png`:`${n}9Y7O9.png`),y.src=`${n}0ucaP.png`}(e,"None, radios or buttons","Box, radios or buttons","Click Area","Tooltips"),radiosButtonsDetails:e=>V(e,"None, radios or buttons")},needIntiliatize:["radiosButtons"],bottomSpace:["Keep radio buttons"],items:[{name:"Box, radios or buttons",type:"preview",create:()=>K(),displayOrder:2},{name:"None, radios or buttons",type:"preview",create:()=>function(){const{display:{cell:e,container:t,center:s},buttons:{button:n,primary:r,outlined:o},choiceRadios:{radioParent:i}}=I.classes,{ids:{radioButtons:a,radioName:c,radioButtonLabel:l},classes:{radios:{base:p,radioAction:u},margins:{negative:m,zeroX:g},label:f,pointerEventsNone:y}}=d,v=D(),h=b("Submit",[n,r]),w=b("Skip",[n,o]);h.classList.add(y),w.classList.add(y),w.style.marginLeft="4px",w.style.minWidth="70px";const S=document.createElement("div");S.classList.add(t,s),S.style.marginLeft="10px",S.append(h,w);const x=["Approve","Improve edit","Reject and edit","Reject"].map((e=>T(e,l))),C=document.createElement("fieldset");C.classList.add(t,m),C.style.textAlign="center",C.append(...x,S),q(C,{padding:"10px 0px"}),C.style.transform="scale(0.91)";const E=document.createElement("div");E.style.paddingTop="3px",E.style.paddingBottom="7px",E.style.backgroundColor=R,E.append(C),E.classList.add(t),E.style.justifyContent="flex-end",C.style.justifyContent="flex-end",C.style.whiteSpace="nowrap",C.style.marginLeft="-20px",C.style.marginRight="-12px";const L=j();q(L);const k=document.createElement("div");return k.append(E,L),v.append(k),v;function T(t,s){const n=document.createElement("label");n.classList.add(e,f),n.htmlFor=s,n.textContent=t;const r=document.createElement("div");r.classList.add(e),r.append(n);const o=document.createElement("input");o.type="radio",o.classList.add(p,u),o.id=s,o.name=c;const d=document.createElement("div");d.classList.add(e),d.append(o);const l=document.createElement("div");l.classList.add(m,g,i),l.append(r,d);const y=document.createElement("div");return y.style.padding="4px","Approve"!==t&&(y.id=a),y.append(l),y}}(),displayOrder:9},{name:"Click Area",type:"preview",create:()=>W(),displayOrder:11},{name:"Tooltips",type:"preview",create:()=>W(),displayOrder:4},{name:"Move review actions",id:i+"moveReviewActions",configKey:"options.radioVsButtons.moveRadioBox",type:"toggle",toggleEntry:"Move review actions",dependents:["Keep radio buttons","Add tooltips"],refPreviewUpdates:["radiosButtons"],displayOrder:1},{name:"Keep radio buttons",id:i+"keepRadioButtons",configKey:"options.radioVsButtons.keepRadios",type:"toggle",indents:1,toggleEntry:"Move review actions",dependents:["with borders","Large click area"],refPreviewUpdates:["radiosButtons"],displayOrder:5},{name:"with borders",id:i+"radiosWithBorders",configKey:"options.radioVsButtons.radioWithBorders",type:"toggle",indents:1,toggleEntry:"Move review actions",dependents:["Border colour","Border width"],refPreviewUpdates:["radiosButtons"],displayOrder:6},{name:"Border colour",id:i+"radiosBordersColour",configKey:"colour.radioSeperator",type:"colour",indents:2,refPreviewUpdates:["radiosButtonsDetails"],displayOrder:7},{name:"Border width",id:i+"radiosSizeColour",configKey:"size.radioSeperator",type:"select",postfix:"px",values:[1,2,3,4,5],indents:2,refPreviewUpdates:["radiosButtonsDetails"],displayOrder:8},{name:"Large click area",id:i+"largeClickArea",configKey:"options.radioVsButtons.largerClickArea",type:"toggle",indents:1,toggleEntry:"Move review actions",refPreviewUpdates:["radiosButtons"],displayOrder:10},{name:"Add tooltips",id:i+"Tooltips",configKey:"options.radioVsButtons.tooltips",type:"toggle",indents:1,toggleEntry:"Move review actions",refPreviewUpdates:["radiosButtons"],displayOrder:3}]},{tabMenu:"User Cards",id:i+"UserCards",previewUpdates:{userCards:e=>function(e,t,s){const o=z(e,t),i=z(e,s),a=o.lastElementChild,d=i.lastElementChild,c=i.querySelector("img"),l=g(S,"options.userCards"),p="Yes"===l?.getUserCards,u="Yes"===l?.withEditiorStats,m=[[["0N0gd.png","ABwF9.png"],p,u],[["eGv5x.png","ABwF9.png"],p],[["yrz32.png","ZFoyD.png"]]],f=[[["tbGE3.png","ETSJS.png"],p,u],[["ldstt.png","ETSJS.png"],p],[["7Gw2y.png","aQz4W.png"]]],y=r?m:f,[[v,h]]=y.find((([e,...t])=>t.every(Boolean)));a.src=`${n}${v}`,c.src=`${n}${h}`;if(p&&u){if(d.children.length>1)return void Q(null,null,i);const e=[{approval_date:1},{rejection_date:1},{rejection_date:1},{},{},{}],{colour:t,size:{editorStatistics:s}}=S,n=_(e,t,s);d.append(n)}else d.children.length>1&&d.lastElementChild.remove()}(e,"All user Cards","Editor Statistics"),editorStatistics:e=>Q(e,"Editor Statistics"),StackUsercards:e=>function(e,t,s=z(e,t)){const o=s.lastElementChild,i=g(S,"options.userCards"),a="Yes"===i?.useStackUserCards,d="Yes"===i?.newContributor,c=[["Q9i5g.png",!a],["rUkpt.png",a&&!d],["DFvCY.png",a&&d]],l=[["sVN26.png",!a],["THeVj.png",a&&!d],["oYl0U.png",a&&d]],p=r?c:l,[u]=p.find((([e,t])=>t));o.src=`${n}${u}`}(e,"Preview Stack user cards")},needIntiliatize:["userCards","StackUsercards"],bottomSpace:["Add user cards","Stack Design user cards"],items:[{name:"All user Cards",type:"preview",create:()=>function(){const e=D(),t=j();return e.append(t),e}(),displayOrder:3},{name:"Editor Statistics",type:"preview",create:()=>function(){const{container:e}=I.classes.display,{sizes:{editorAvatar:{width:t,height:s}}}=d,n=D(),r=document.createElement("img");r.style.width=t;const o=document.createElement("div");o.style.width=t,o.style.height=s,o.append(r);const i=document.createElement("div");return i.classList.add(e),i.style.whiteSpace="nowrap",i.style.overflow="hidden",q(i),i.append(o),n.append(i),n}(),displayOrder:10},{name:"Preview Stack user cards",type:"preview",create:()=>K(),displayOrder:13},{name:'Editors do not get the "New contributor" indicator. This is only for demonstration purpose.',id:i+"newContributorNote",type:"note",indents:1,displayOrder:14},{name:"Add user cards",id:i+"addUserCards",configKey:"options.userCards.getUserCards",type:"toggle",toggleEntry:"Add user cards",dependents:["with editor statistics","Stack Design user cards"],refPreviewUpdates:["userCards"],displayOrder:1},{name:"with editor statistics",id:i+"withEditorStatistics",configKey:"options.userCards.withEditiorStats",type:"toggle",indents:1,toggleEntry:"Add user cards",dependents:["Editor statistics options:","Header colour","Approved colour","Rejected colour","Total colour","Editor statistics text size"],refPreviewUpdates:["userCards"],displayOrder:2},{name:"Editor statistics options:",id:i+"editorStatisticsOptions",type:"header",indents:1,refPreviewUpdates:["editorStatistics"],displayOrder:4},{name:"Header colour",id:i+"editorStatisticsHeaderColour",configKey:"colour.editorHeader",type:"colour",indents:2,refPreviewUpdates:["editorStatistics"],displayOrder:5},{name:"Approved colour",id:i+"editorStatisticsApprovedColour",configKey:"colour.editorApproved",type:"colour",indents:2,refPreviewUpdates:["editorStatistics"],displayOrder:6},{name:"Rejected colour",id:i+"editorStatisticsRejectedColour",configKey:"colour.editorRejected",type:"colour",indents:2,refPreviewUpdates:["editorStatistics"],displayOrder:7},{name:"Total colour",id:i+"editorStatisticsTotalColour",configKey:"colour.editorTotal",type:"colour",indents:2,refPreviewUpdates:["editorStatistics"],displayOrder:8},{name:"Editor statistics text size",id:i+"editorStatisticsSize",configKey:"size.editorStatistics",type:"size",postfix:"%",indents:2,refPreviewUpdates:["editorStatistics"],displayOrder:9},{name:"Stack Design user cards",id:i+"StackUserCards",configKey:"options.userCards.useStackUserCards",type:"toggle",toggleEntry:"Add user cards",indents:1,dependents:['Show "New contributor"'],refPreviewUpdates:["StackUsercards"],displayOrder:11},{name:'Show "New contributor"',id:i+"ShowNewContributor",configKey:"options.userCards.newContributor",type:"toggle",toggleEntry:"Add user cards",indents:1,refPreviewUpdates:["StackUsercards"],displayOrder:12}]},{tabMenu:"Move",id:i+"Move",previewUpdates:{progressBar:e=>X(e,"Progress Bar"),diffChoices:e=>G(e,"Diff Choices"),pageTitleLink:e=>J(e,"Page Title Link"),postType:e=>Z(e,"Post Type"),postTypeColour:e=>ee(e,"Post Type Colour Preview"),moveNextButton:e=>function(e,t,s=z(e,t)){H(s.lastElementChild,"Yes"===g(S,"options.moveNextButtons"),{lightOn:"L1opa.png",lightOff:"ew69w.png",darkOn:"DFElk.png",darkOff:"GEpbV.png"})}(e,"Move Next Buttons")},needIntiliatize:["moveNextButton"],topSpaceSeparator:["Move diff choices","Rework page title","Move post type up","Move notice buttons"],items:[{name:"Progress Bar",type:"preview",create:()=>function(){const{container:e}=I.classes.display,{classes:{naviagations:{base:t,item:s,selected:n},padding:{Y:r},title:{base:o}}}=d,i=D(),a=document.createElement("a");a.classList.add(s,n),a.textContent="Review tasks";const c=document.createElement("a");c.classList.add(s),c.textContent="Stats";const l=document.createElement("a");l.classList.add(s),l.textContent="History";const p=document.createElement("div");p.classList.add(t),p.style.margin="0px",p.append(a,c,l);const u=document.createElement("div");u.classList.add(o),u.style.flexDirection="column",u.style.alignItems="flex-end",u.append(p);const m=document.createElement("div");q(m,{padding:"3px",paddingTop:"12px",paddingBottom:"10px",marginBottom:"0px"}),m.classList.add(e),m.style.flexDirection="column",m.style.alignItems="flex-end";const g=function(){const{cell:e}=I.classes.display,t=document.createElement("div");t.classList.add(e);const s='\n                    <div class="d-flex ai-center sm:fd-column">\n                        <div class="flex--item mr12 ws-nowrap">\n                            <span>Your daily reviews</span>\n                            <span class="js-reviews-done mrn2">20</span>\n                            <span class="js-reviews-per-day" data-reviews-per-day="40">/40</span>\n                        </div>\n                        <div class="flex--item">\n                            <div class="s-progress wmn1 h8 bar-pill">\n                                <div class="s-progress--bar bar-pill js-review-progress"\n                                     role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"\n                                     style="width: 50%;"></div>\n                            </div>\n                        </div>\n                    </div>\n                ';return t.innerHTML=s,t}();return g.classList.add(r),m.append(u,g),i.append(m),X(null,null,i),i}(),displayOrder:5},{name:"Diff Choices",type:"preview",create:()=>function(){const e=K();return G(null,null,e),e}(),displayOrder:7},{name:"Page Title Link",type:"preview",create:()=>function(){const e=K();return J(null,null,e),e}(),displayOrder:9},{name:"Post Type",type:"preview",create:()=>function(){const e=K();return Z(null,null,e),e}(),displayOrder:11},{name:"Post Type Colour Preview",type:"preview",create:()=>function(){const{classes:{title:{header:e}},colours:{border:t}}=d,s=D(),n=document.createElement("h1");n.classList.add(e),n.textContent="Question",n.style.borderBottom=`1px solid ${t}`,n.style.margin="0px",n.style.paddingBottom="5px";const r=document.createElement("div");return r.style.textAlign="center",r.append(n),q(r,{padding:"3px",paddingTop:"12px",marginBottom:"0px"}),s.append(r),ee(null,null,s),s}(),displayOrder:13},{name:"Move Next Buttons",type:"preview",create:()=>K(),displayOrder:15},{name:"Move progress bar",id:i+"moveProgressBar",configKey:"options.moveProgressBar",type:"toggle",toggleEntry:"Move progress bar",dependents:['Progress "done" colour','Progress "not done" colour',"Progress text colour"],refPreviewUpdates:["progressBar"],displayOrder:1},{name:'Progress "done" colour',id:i+"progressDoneColour",configKey:"colour.progressDone",type:"colour",refPreviewUpdates:["progressBar"],displayOrder:2},{name:'Progress "not done" colour',id:i+"progressNotDoneColour",configKey:"colour.progressNotDone",type:"colour",refPreviewUpdates:["progressBar"],displayOrder:3},{name:"Progress text colour",id:i+"progressTextColour",configKey:"colour.progressTextColour",type:"colour",refPreviewUpdates:["progressBar"],displayOrder:4},{name:"Move diff choices",id:i+"movePageTitleLink",configKey:"options.moveDiffChoices",type:"toggle",refPreviewUpdates:["diffChoices"],displayOrder:6},{name:"Rework page title",id:i+"movePageTitleLink",configKey:"options.movePageTitleLink",type:"toggle",refPreviewUpdates:["pageTitleLink"],displayOrder:8},{name:"Move post type up",id:i+"AnswerQuestionOnTop",configKey:"options.AnswerQuestionOnTop",type:"toggle",toggleEntry:"Move post type up",dependents:["Post type colour"],refPreviewUpdates:["postType","postTypeColour"],displayOrder:10},{name:"Post type colour",id:i+"postTypeColour",configKey:"colour.postType",type:"colour",refPreviewUpdates:["postTypeColour"],displayOrder:12},{name:"Move notice buttons",id:i+"moveNoticeButtons",configKey:"options.moveNextButtons",type:"toggle",toggleEntry:"Move notice buttons",refPreviewUpdates:["moveNextButton"],displayOrder:14}]},{tabMenu:"Highlight",id:i+"Highlight",previewUpdates:{summaryPreview:e=>re(e,"Summary Preview"),summaryUpdate:e=>function(e,t){if("Yes"!==g(S,"options.highlightSummary"))return;const s=z(e,t).lastElementChild,{colour:{summary:n},size:{summary:r}}=S;s.style.fontSize=r,s.style.color=n}(e,"Summary Preview"),messagePreview:e=>ne(e,"Message Preview"),messageUpdate:e=>function(e,t,s){if("Yes"!==g(S,"options.prominentReviewMessage"))return;s||(s=z(e,t));const n=s.lastElementChild.firstElementChild,{colour:{message:r,messageBackground:o},size:{message:i}}=S;n.style.color=r,n.style.backgroundColor=o,n.style.fontSize=i}(e,"Message Preview"),lineThrough:e=>se(e,"Line through")},topSpaceSeparator:["Prominent review message","Remove LineThrough"],bottomSpace:["Highlight edit summary","Prominent review message","Remove LineThrough"],items:[{name:"Summary Preview",type:"preview",create:()=>function(){const{classes:{margins:{top:e}}}=d,{classes:{summary:t}}=I,s=D(),n=document.createElement("p");return n.classList.add(t,e),n.textContent="Comment: Fixed something.",s.append(n),re(null,null,s),s}(),displayOrder:4},{name:"Message Preview",type:"preview",create:()=>function(){const{display:{container:e,cell:t},buttons:{button:s,primary:n}}=I.classes,{notice:{base:r,info:o},padding:{top:i},margins:{negative:a},pointerEventsNone:c}=d.classes,l=D(),p=document.createElement("div"),u=document.createElement("div");u.classList.add(e,a,i);const m=b("Next task",[s,n,t]);return m.classList.add(c),u.append(m),p.classList.add(r,o),p.append(document.createTextNode("You are not able to review this item."),u),l.append(p),ne(null,null,l),l}(),displayOrder:9},{name:"Line through",type:"preview",create:()=>function(){const{ids:{lineThrough:e},classes:{reviewText:{post:t,prose:s,diff:n}}}=d,r=D(),o=document.createElement("p");return o.classList.add(s,t),o.style.marginBottom="0px",o.append(document.createTextNode("You will always need to foo the bar")),o.append(i(" :)")),o.append(document.createTextNode(" If not you risk a baz occuring.")),o.append(i(" Thank you so much for reading and upvoting my post!")),q(o,{padding:"3px",marginBottom:"0px"}),r.append(o),se(null,null,r),r;function i(t){const s=document.createElement("span");return s.classList.add(n),s.id=e,s.textContent=t,s}}(),displayOrder:11},{name:"Highlight edit summary",id:i+"highlightsummary",configKey:"options.highlightSummary",type:"toggle",toggleEntry:"Highlight edit summary",dependents:["Edit summary colour","Edit summary size"],refPreviewUpdates:["summaryPreview"],displayOrder:1},{name:"Edit summary colour",id:i+"summaryColour",configKey:"colour.summary",type:"colour",refPreviewUpdates:["summaryUpdate"],displayOrder:2},{name:"Edit summary size",id:i+"summarySize",configKey:"size.summary",postfix:"%",type:"size",refPreviewUpdates:["summaryUpdate"],displayOrder:3},{name:"Prominent review message",id:i+"prominentReviewMessage",configKey:"options.prominentReviewMessage",type:"toggle",toggleEntry:"Prominent review message",dependents:["Review message colour","Review message size","Review message background colour"],refPreviewUpdates:["messagePreview"],displayOrder:5},{name:"Review message colour",id:i+"reviewMessageColour",configKey:"colour.message",type:"colour",refPreviewUpdates:["messageUpdate"],displayOrder:6},{name:"Review message size",id:i+"reviewMessageSize",configKey:"size.message",postfix:"%",type:"size",refPreviewUpdates:["messageUpdate"],displayOrder:7},{name:"Review message background colour",id:i+"reviewMessageBackgroundColour",configKey:"colour.messageBackground",type:"colour",refPreviewUpdates:["messageUpdate"],displayOrder:8},{name:"Remove LineThrough",id:i+"removeLineThrough",configKey:"options.removeLineThrough",type:"toggle",refPreviewUpdates:["lineThrough"],displayOrder:10}]},{tabMenu:"Extras",id:i+"Extras",previewUpdates:{titleLinks:e=>function(e,t,s=z(e,t)){H(s.lastElementChild,"Yes"===g(S,"options.linksOnTitles"),{lightOn:"O1O08.png",lightOff:"ki4wD.png",darkOn:"TM34Z.png",darkOff:"06tam.png"})}(e,"Title links"),keepDiffs:e=>te(e,"Keep Diff Choices"),newSummary:e=>function(e,t,s=z(e,t)){H(s.lastElementChild,"Yes"===g(S,"options.postSummary.useStackSummary"),{lightOn:"zphgU.png",lightOff:"hunsb.png",darkOn:"TDBWF.png",darkOff:"bgZmI.png"})}(e,"Stack Summary"),quota:e=>function(e,t,s=z(e,t)){const n=s.querySelector("#"+d.ids.quotaNotice),r=g(S,"size.apiQuotaLimit");isNaN(r)||(n.innerHTML=n.innerHTML.replace(/\(remaining: \d+\)/,`(remaining: ${r})`))}(e,"Quota Notice Limit"),filters:e=>function(e,t,s=z(e,t)){const o=s.lastElementChild,i=g(S,"options.reviewFilters"),a="Yes"===i?.removeTextFilters,d="Yes"===i?.putAlertIcon,c="Yes"===i?.keepFilterList,l=[["hDRdU.png",!a],["nDJK9.png",d&&c],["XsHYT.png",d&&!c],["4P4Qo.png",!d&&c],["WPs4c.png",!d&&!c]],p=[["KREUM.png",!a],["9Cbil.png",d&&c],["OJqle.png",d&&!c],["oI6NR.png",!d&&c],["JDNgn.png",!d&&!c]],u=r?l:p,[m]=u.find((([e,t])=>t));o.src=`${n}${m}`}(e,"Filter Options"),modFlair:e=>function(e,t,s=z(e,t)){H(s.lastElementChild,"Yes"===g(S,"options.wantNewModeratorFlair"),{lightOn:"j9pvo.png",lightOff:"7NThn.png",darkOn:"TrBPp.png",darkOff:"2KvL5.png"})}(e,"Moderator Flair")},needIntiliatize:["titleLinks","newSummary","filters","modFlair"],topSpaceSeparator:["Always diff choices","Stack Design post summary","API quota warning:","Remove plain filters","Stack Design moderator flair"],bottomSpace:["Stack Design post summary","Remove plain filters","Insert alert icon"],items:[{name:"Title links",type:"preview",create:()=>K(),displayOrder:2},{name:"Keep Diff Choices",type:"preview",create:()=>function(){const{colours:{border:e}}=d,t=D(),s=j();s.src=r?`${n}A2Xxz.png`:`${n}h7zwG.png`;const o=document.createElement("div");o.style.borderTop=`1px solid ${e}`,q(o,{paddingTop:"10px"}),o.append(s);const i=document.createElement("div");return q(i,{paddingTop:"10px",paddingLeft:"10px"}),i.append(o),t.append(i),te(null,null,t),t}(),displayOrder:5},{name:"Stack Summary",type:"preview",create:()=>K(),displayOrder:8},{name:"Quota Notice Limit",type:"preview",create:()=>function(){const t=D(),s=N(g(S,"size.apiQuotaLimit")||g(e,"size.apiQuotaLimit"),"quota",d.ids.quotaNotice);return t.append(s),t}(),displayOrder:11},{name:"Filter Options",type:"preview",create:()=>K(),displayOrder:15},{name:"Moderator Flair",type:"preview",create:()=>K(),displayOrder:17},{name:'Applies to "Stack Design user cards" and "Stack Design post summary"',id:i+"onlyStackDesignNote",type:"note",indents:1,displayOrder:18},{name:"Links in titles",id:i+"linksInTitles",configKey:"options.linksOnTitles",type:"toggle",refPreviewUpdates:["titleLinks"],displayOrder:1},{name:"Always diff choices",id:i+"keepDiffChoices",configKey:"options.keepDiffChoices",type:"toggle",toggleEntry:"Always diff choices",dependents:["added diff choices colour"],refPreviewUpdates:["keepDiffs"],displayOrder:3},{name:"added diff choices colour",id:i+"keepDiffChoicesColour",configKey:"colour.diffChoices",type:"colour",refPreviewUpdates:["keepDiffs"],displayOrder:4},{name:"Stack Design post summary",id:i+"StackPostSummary",configKey:"options.postSummary.useStackSummary",type:"toggle",toggleEntry:"Stack Design post summary",refPreviewUpdates:["newSummary"],displayOrder:6},{name:"Using Stack Exchange API",id:i+"StackPostSummary",configKey:"options.postSummary.useAPI",type:"toggle",toggleEntry:"Using Stack Exchange API",displayOrder:7},{name:"API quota warning:",id:i+"quotaWarning",type:"header",indents:0,displayOrder:9},{name:"show at (0 - 9999)",id:i+"quotaLimit",configKey:"size.apiQuotaLimit",type:"size",maxValue:9999,refPreviewUpdates:["quota"],displayOrder:10},{name:"Remove plain filters",id:i+"RemovePlainFilters",configKey:"options.reviewFilters.removeTextFilters",type:"toggle",toggleEntry:"Remove plain filters",dependents:["Insert alert icon","Show TinyTags™"],refPreviewUpdates:["filters"],displayOrder:12},{name:"Insert alert icon",id:i+"InsertAlertIcon",configKey:"options.reviewFilters.putAlertIcon",type:"toggle",indents:1,toggleEntry:"Remove plain filters",refPreviewUpdates:["filters"],displayOrder:13},{name:"Show TinyTags™",id:i+"InsertAlertIcon",configKey:"options.reviewFilters.keepFilterList",type:"toggle",indents:1,toggleEntry:"Remove plain filters",refPreviewUpdates:["filters"],displayOrder:14},{name:"Stack Design moderator flair",id:i+"StackModeratorFlair",configKey:"options.wantNewModeratorFlair",type:"toggle",toggleEntry:"Stack Design moderator flair",refPreviewUpdates:["modFlair"],displayOrder:16}]}];function y(t=!1){if(t)c.forEach((e=>{r(e,S)}));else{const t=document.querySelector(`#${d.ids.body} > div`);r((s=c,n=t.id,s.find((({id:e})=>e===n))),e)}var s,n;function r(t,s){t.items.forEach((t=>{const n=t.element,r=t.id;if(r){!function(t,s,n){const{configKey:r}=s;if(!r)return;({checkbox:e=>e.checked="Yes"===g(n,r),color:e=>e.value=U(g(n,r))||"#000000",number:t=>t.value=g(n,r)?.replace(s.postfix,"")||g(e,r)?.replace(s.postfix,"")||"","select-one":e=>e.value=g(n,r)})[t.type](t),t.dispatchEvent(new Event("change",{bubbles:!0}))}(n.querySelector("#"+r),t,s)}}))}}let S;function b(e,t){const s=document.createElement("button");return s.type="button",s.classList.add(...t),s.textContent=e,s}l((function(){const{show:e,topMenuSelector:t,headerNtooltip:s,ids:{icon:n},classes:{icon:r,smodals:{modal:i}}}=d;if(document.querySelector(`${t} #${n}`))return;const l=document.createElement("a");l.classList.add(r.iconLink),"undefined"!=typeof Svg?l.append(Svg.Gear().get(0)):(l.textContent="⚙️",l.style.fontSize="125%"),l.title=s;const m=document.createElement("li");m.classList.add(r.iconItem),m.id=n,m.append(l),document.querySelector(t)?.append(m),m.addEventListener("click",(()=>{const t=function(e){const{ids:{aside:t},classes:{smodals:{modal:s}},attributes:{modalTarget:n}}=d,r=document.createElement("aside");return r.classList.add(s),r.id=t,r.setAttribute(n,"modal"),r.append(e),r}(function(){S=o();const e=function(){const{headerNtooltip:e,ids:{header:t},classes:{smodals:{header:s}},attributes:{draggableTarget:n}}=d,r=document.createElement("h3");return r.classList.add(s),r.setAttribute(n,"handle"),r.id=t,r.style.fontSize="1.72rem",r.textContent=e,r}(),t=function(){const{classes:{naviagations:{base:e},header:t}}=d,s=document.createElement("ul");return s.classList.add(e,t),s}(),s=function(){const{ids:{body:e},classes:{scroll:t,smodals:{body:s}}}=d,n=document.createElement("div");return n.classList.add(s),n.id=e,n.style.paddingTop="20px",n.style.maxHeight=window.innerHeight-275+"px",n.classList.add(t),n.style.marginRight="-15px",n.style.paddingRight="15px",n}();!function(e,t){const s=c.map((s=>{const n=function(e){const t=p(c,e),s={preview:L,toggle:B,colour:A,select:k,size:T,header:O,note:$},n=t.items.sort(((e,t)=>e.displayOrder-t.displayOrder)).map((t=>s[t.type](t.name,e)));(t.needIntiliatize||[]).forEach((s=>t.previewUpdates[s](e))),(t.bottomSpace||[]).forEach((e=>{u(t.items,e).element.style.paddingBottom="5px"})),(t.topSpaceSeparator||[]).forEach((e=>function(e){const{colours:{seperator:t}}=d;e.style.paddingTop="20px",e.style.borderTop=`3px solid ${t}`}(u(t.items,e).element))),function(e){const t=p(c,e).items;new Set(t.map((({toggleEntry:e})=>e))).forEach((t=>t&&M(e,t)))}(e);const r=document.createElement("div");return r.id=p(c,e).id,r.append(...n),r}(s.tabMenu),r=function(e,t=!1){const{classes:{naviagations:{item:s,selected:n}}}=d,r=document.createElement("li");return r.classList.add(s),t&&r.classList.add(n),r.textContent=e,r}(s.tabMenu,s.tabDefault);return s.tabDefault&&t.append(n),function(e,t,s,n){const{classes:{naviagations:{selected:r}}}=d;t.addEventListener("click",(()=>{[...e.children].forEach((e=>e.classList.remove(r))),s.replaceChild(n,s.firstElementChild),t.classList.add(r)}))}(e,r,t,n),r}));e.append(...s)}(t,s);const n=function(){const{display:{cell:e,container:t},buttons:{button:s,primary:n,danger:r,outlined:i}}=I.classes,{hide:c,classes:{smodals:{footer:l},margins:{negative:p,zeroX:u}}}=d,m=b("Apply & Exit",[e,s,n]),g=b("Cancel",[e,s]);m.addEventListener("click",(()=>a(S))),m.dataset.action=c,g.addEventListener("click",(()=>{S=o(),y(!0)})),g.dataset.action=c;const f=document.createElement("div");f.classList.add(t,u,p),f.append(m,g);const v=b("Restore tab settings",[s,r,i]);v.addEventListener("click",(e=>y(!1)));const h=document.createElement("div");return h.classList.add(t,p,u,l),h.style.justifyContent="space-between",h.append(v,f),h}(),r=function(){const{buttons:{button:e,muted:t}}=I.classes,{hide:s,classes:{smodals:{close:n}}}=d,r=b("",[n,e,t]);return"undefined"!=typeof Svg?r.append(Svg.ClearSm().get(0)):r.textContent="✖",r.dataset.action=s,r}(),i=function(){const{draggable:e,classes:{smodals:{dialog:t}}}=d,s=document.createElement("div");return s.classList.add(t),s.dataset.controller=e,s}();return i.append(e,t,s,n,r),i}());m.append(t),l.dataset.action=e,m.dataset.controller=i,setTimeout((()=>l.click()),0)}),{once:!0})}));const x=15;function C(e,t){const s=e.refPreviewUpdates||[],n=p(c,t);return s.map((e=>n.previewUpdates[e]))}function E(){const{container:e,center:t}=I.classes.display,s=document.createElement("div");return s.classList.add(e,t),s}function L(e,t){const s=m(c,t,e),n=s.create();return s.element=n,n}function k(e,t){const s=m(c,t,e),n=function(e,t,s,n,r,o=1){const{classes:{select:i},sizes:{labels:{fontSizeSmaller:a,fontWeightSmaller:c}}}=d,l=E(),p=P(e,t,{fontSize:a,width:"160px",alignIndents:o,fontWeight:c}),u=document.createElement("select");u.id=t;const m=n.map((e=>{const t=document.createElement("option");return t.value=e,t.textContent=e,t}));u.append(...m),u.value=s.replace(r,""),u.style.padding=".4em .3em";const g=document.createElement("div");g.classList.add(i),g.style.width="45px",g.style.textAlign="right",g.append(u);const f=P(r,t,{fontSize:a,fontWeight:c});return l.append(p,g,f),l}(e,s.id,g(S,s.configKey),s.values,s.postfix,s.indents);s.element=n;const r=C(s,t);return n.addEventListener("change",(e=>{f(S,s.configKey,e.target.value),r.forEach((e=>e(t)))})),n}function T(e,t){const s=m(c,t,e),n=function(e,t,s,n,r,o=1){const{classes:{input:i},sizes:{labels:{fontSizeSmaller:a,fontWeightSmaller:c}}}=d,l=E(),p=P(e,t,{fontSize:a,width:"160px",alignIndents:o,fontWeight:c});p.style.marginRight="10px";const u=document.createElement("input");u.classList.add(i),u.type="number",u.min="0",u.max=n,u.id=t,s&&(u.value=s.replace(r,""));u.style.width=8*Math.ceil(Math.log10(n))+16+12+"px",u.style.textAlign="right",u.style.padding=".2em .3em",u.addEventListener("input",(({target:e})=>{const{valueAsNumber:t,max:s,min:n}=e;e.value=Math.floor(t)||n,t>+s&&(e.value=s),t<+n&&(e.value=n)}));const m=P(r,t,{fontSize:a,fontWeight:c});return l.append(p,u,m),l}(e,s.id,g(S,s.configKey),s.maxValue||250,s.postfix,s.indents);s.element=n;const r=C(s,t);return n.addEventListener("change",(e=>{f(S,s.configKey,e.target.value+(s.postfix||"")),r.forEach((e=>e(t)))})),n}function A(e,t){const s=m(c,t,e),n=function(e,t,s,n=1){const r=E(),{sizes:{labels:{fontSizeSmaller:o,fontWeightSmaller:i}}}=d,a=P(e,t,{fontSize:o,fontWeight:i}),c=U(s)||"#000000",l=document.createElement("input");return l.type="color",l.id=t,l.value=c,l.style.margin="2px",l.style.marginLeft=n*x+"px",l.style.marginRight="10px",l.style.borderRadius="5px",l.style.height="25px",l.style.width="44px",r.append(l,a),r}(e,s.id,g(S,s.configKey),s.indents);s.element=n;const r=C(s,t);return n.addEventListener("change",(e=>{f(S,s.configKey,e.target.value),r.forEach((e=>e(t)))})),n}function O(e,t){const s=m(c,t,e),n=function(e,t,s=0){const{display:{cell:n}}=I.classes,{classes:{label:r}}=d,o=E(),i=document.createElement("p");return i.classList.add(n,r),i.id=t,i.textContent=e,i.style.marginBottom="10px",i.style.marginLeft=s*x+"px",o.append(i),o}(e,s.id,s.indents);return s.element=n,n}function $(e,t){const s=m(c,t,e),n=function(e,t,s=0){const n=document.createElement("sup");return n.style.marginLeft=s*x+"px",n.id=t,n.textContent="Note: "+e,n}(e,s.id,s.indents);return s.element=n,n}function B(e,t){const s=m(c,t,e),n=function(e,t,s,n=0){const{display:{cell:r}}=I.classes,{classes:{toggle:{sweetch:o,indicator:i}}}=d,a=E();a.style.justifyContent="space-between";const c=P(e,t,{indents:n}),l=document.createElement("div");l.classList.add(r,o);const p=document.createElement("input");p.type="checkbox",p.id=t,p.checked="Yes"===s;const u=document.createElement("span");return u.classList.add(i),l.append(p,u),a.append(c,l),a}(e,s.id,g(S,s.configKey),s.indents);s.element=n;const r=C(s,t);return n.addEventListener("change",(n=>{f(S,s.configKey,n.target.checked?"Yes":"No"),M(t,e),r.forEach((e=>e(t)))})),n}function P(e,t,s){const{classes:{label:n}}=d,r=document.createElement("label");r.classList.add(n),r.htmlFor=t,r.textContent=e;const{fontSize:o,fontWeight:i,width:a,indents:c,alignIndents:l}=s;return o&&(r.style.fontSize=s.fontSize),i&&(r.style.fontWeight=i),a&&(r.style.width=a),c&&(r.style.marginLeft=c*x+"px"),l&&(r.style.marginLeft=l*x+10+44+"px"),r}function q(e,t={}){const{padding:s,paddingTop:n,paddingLeft:r,paddingBottom:o,marginBottom:i}=t;e.style.backgroundColor=R,s&&(e.style.padding=s),r&&(e.style.paddingLeft=r),n&&(e.style.paddingTop=n),o&&(e.style.paddingBottom=o),i&&(e.style.marginBottom=i)}function U(e){if(!e)return null;if(e.startsWith("#"))return e;const t=e.match(/^var\((--[\w-]*)\)/);if(t){const e=getComputedStyle(document.body).getPropertyValue(t[1]);return e.startsWith("hsl")?function(e){const t=e.match(/^hsl\(([\d.]+),\s?([\d.]+)%,\s?([\d.]+)%\)$/i);if(!t)return;const[s,n,r]=[t[1],t[2],t[3]/=100],o=n*Math.min(r,1-r)/100,i=e=>{const t=(e+s/30)%12,n=r-o*Math.max(Math.min(t-3,9-t,1),-1);return Math.round(255*n).toString(16).padStart(2,"0")};return`#${i(0)}${i(8)}${i(4)}`}(e):e}const s=document.createElement("div");s.style.color=e,document.body.appendChild(s);const n=window.getComputedStyle(s).color;return s.remove(),function(e){const t=e.match(/^rgba?\((\d+),\s?(\d+),\s?(\d+)\)$/i);if(!t)return;return"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2)}(n)}function M(e,t){const s=p(c,e).items;let n=u(s,t);n.toggleEntry&&(t!==n.toggleEntry&&(n=u(s,n.toggleEntry)),function e(t,n,r){if(r>5)return;r>0&&function(e,t){const s=e.element;if(!s)return;const{classes:{select:n,toggle:{sweetch:r}},colours:{active:o,muted:i,toggleMutedOn:a,toggleMutedoff:c}}=d;t?[...s.children].forEach((t=>{if("toggle"===e.type&&t.classList.contains(r)){const e=t.firstElementChild,s=t.lastElementChild;e.disabled=!0,e.checked?s.style.background=a:s.style.background=c}else t.disabled=!0,t.style.color=i,"select"===e.type&&t.classList.contains(n)&&(t.firstElementChild.disabled=!0)})):[...s.children].forEach((t=>{if("toggle"===e.type&&t.classList.contains(r)){const e=t.firstElementChild,s=t.lastElementChild;e.disabled=!1,s.removeAttribute("style")}else t.disabled=!1,t.style.color=o,"select"===e.type&&t.classList.contains(n)&&(t.firstElementChild.disabled=!1)}))}(t,n);if(t.dependents){const o=g(S,t.configKey);t.dependents.forEach((t=>e(u(s,t),n||"Yes"!==o,r+1)))}}(n,!1,0))}function z(e,t){return m(c,e,t).element}function D(){const{colours:{border:e}}=d,t=document.createElement("div");t.style.width="500px",t.style.margin="5px",t.style.marginTop="10px",t.style.marginBottom="10px",t.style.padding="5px",t.style.border=`3px solid ${e}`,t.style.borderRadius="5px";const s=document.createElement("p");return s.style.borderBottom=`1px solid ${e}`,s.style.marginBottom="5px",s.textContent="Preview:",t.append(s),t}function j(){const e=document.createElement("img");return e.style.width="100%",e}function K(){const e=D(),t=j();return e.append(t),e}function W(){const e=D(),t=j();return q(t),e.append(t),e}function H(e,t,s){const{lightOn:o,lightOff:i,darkOn:a,darkOff:d}=s;e.src=r?t?`${n}${o}`:`${n}${i}`:t?`${n}${a}`:`${n}${d}`}function V(e,t){const s=z(e,t),{ids:{radioButtons:n}}=d,{colour:{radioSeperator:r},size:{radioSeperator:o}}=S,i="Yes"===g(S,"options.radioVsButtons.radioWithBorders");s.querySelectorAll(`#${n}`).forEach((e=>{i?(e.style.paddingLeft="3px",e.style.borderLeft=`${r} solid ${o}px`):(e.style.paddingLeft="4px",e.style.borderLeft="none")}))}function Q(e,t,s=z(e,t)){const n=s.lastElementChild.querySelector("table");if(!n)return;const r=n.children,{size:{editorStatistics:o},colour:i}=S;n.style.fontSize=o,r[0].style.color=i.editorHeader,r[1].style.color=i.editorApproved,r[2].style.color=i.editorRejected,r[3].style.color=i.editorTotal}function J(e,t,s=z(e,t)){H(s.lastElementChild,"Yes"===g(S,"options.movePageTitleLink"),{lightOn:"9JnTg.png",lightOff:"26MhB.png",darkOn:"19rOX.png",darkOff:"QS05y.png"})}function G(e,t,s=z(e,t)){H(s.lastElementChild,"Yes"===g(S,"options.moveDiffChoices"),{lightOn:"xJT8x.png",lightOff:"kTaNQ.png",darkOn:"mPovF.png",darkOff:"N9JyH.png"})}function X(e,t,s=z(e,t)){const n=s.querySelector("."+d.classes.naviagations.selected);if("Yes"===g(S,"options.moveProgressBar")){const e=S.colour,{daily:t,done:r}=I.selectors.reviews;F(n,e,s.querySelector(t),s.querySelector(r),!1)}else{n.removeAttribute("style"),n.textContent="Review tasks";const e=s.querySelector("#"+I.ids.custom.progressBar);e&&(e.style.visibility="visible")}}function Z(e,t,s=z(e,t)){H(s.lastElementChild,"Yes"===g(S,"options.AnswerQuestionOnTop"),{lightOn:"yJZuA.png",lightOff:"AdHvl.png",darkOn:"JyPv5.png",darkOff:"1mtpe.png"})}function ee(e,t,s=z(e,t)){const n=s.lastElementChild.firstElementChild;"Yes"===g(S,"options.AnswerQuestionOnTop")?(n.textContent="Question",n.style.color=S.colour.postType):n.textContent=Y}function te(e,t,s=z(e,t)){const n=d.ids.keepDiffChoices,r="Yes"===g(S,"options.keepDiffChoices"),o=s.lastElementChild.lastElementChild;if(r){let e=o.querySelector("#"+n);e||(e=h(n,!0),o.lastElementChild.before(e));[...o.querySelectorAll("button")].forEach((e=>e.style.color=S.colour.diffChoices))}else{const e=o.querySelector("#"+n);e&&e.remove()}}function se(e,t,s=z(e,t)){const{ids:{lineThrough:n}}=d;"Yes"===g(S,"options.removeLineThrough")?[...s.querySelectorAll("#"+n)].forEach((e=>e.style.textDecoration="initial")):[...s.querySelectorAll("#"+n)].forEach((e=>e.style.textDecoration="line-through"))}function ne(e,t,s=z(e,t)){const n=s.lastElementChild;if("Yes"===g(S,"options.prominentReviewMessage")){const{colour:{message:e,messageBackground:t},size:{message:s}}=S;w(n,e,t,s)}else""===n.firstChild.nodeValue&&(n.firstElementChild.remove(),n.firstChild.nodeValue="You are not able to review this item.")}function re(e,t,s=z(e,t)){const n=s.lastElementChild,{classes:{summary:r}}=I;if("Yes"===g(S,"options.highlightSummary")){const{colour:{summary:e},size:{summary:t}}=S;v(n,e,t,r)}else{const e=n.textContent;n.textContent=(e||"").trim().replace(/^Summary/,"Comment"),n.removeAttribute("style"),n.classList.add(r)}q(n,{padding:"3px",marginBottom:"0px"})}}()}();